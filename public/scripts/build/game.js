!function e(t,s,r){function n(o,c){if(!s[o]){if(!t[o]){var l="function"==typeof require&&require;if(!c&&l)return l(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=s[o]={exports:{}};t[o][0].call(a.exports,function(e){var s=t[o][1][e];return n(s?s:e)},a,a.exports,e,t,s,r)}return s[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t){var s=function(){var e=function(e,s){var r=document.createElement("div");return r.className="cell turned-over",r.style.backgroundColor="#"+e,r.setAttribute("data-color",e),r.id="cell-"+s,$(r).on("click",t),r},t=function(e){el=e.target,el.className.indexOf("turned-over")>-1&&(el.className="cell",$.publish("cellClicked",el))};return{create:function(t,s){return e(t,s)}}}();t.exports=s},{}],2:[function(e){var t=e("./game.js");t.init()},{"./game.js":3}],3:[function(e,t){var s=e("./score.model.js"),r=e("./grid.js");e("./pubSub.js"),e("./polyfills.js");var n=function(){var e=null;return{pairFound:0,score:0,init:function(){this._registerEvents(),this.scoreDisplay=document.getElementById("score-count"),r.init(),s.fetch().then(this._setScores).then(this._populatScores).then(this.start)},_registerEvents:function(){var e=this;$.subscribe("scoreInc",e,e._scoreAddOne),$.subscribe("scoreDec",e,e._scoreRemoveOne),$.subscribe("pairFound",e,e._pairFoundCB),$("#restart").click(function(t){t.preventDefault(),e._restartGame()})},start:function(){},_setScores:function(t){e=t},_populatScores:function(){var t="",s=e.highScores.length;if(s>0)for(var r=0;s>r;r++){var n=e.highScores[r].points;t+='<p><span class="name">'+e.highScores[r].name+':</span><span class="points">'+n+" point",t+=n>1?"s </span></p>":"</span></p>"}else t="<p> No high Score Yet </p>";var i=document.getElementById("high-scores");i.innerHTML=t},_pairFoundCB:function(){this.pairFound++,8===this.pairFound&&this._gameCompleted()},_restartGame:function(){this.score=0,r._gameRestart(),this._refreshScoreDisplay(this.score)},_scoreAddOne:function(){this.score++,this._refreshScoreDisplay(this.score)},_scoreRemoveOne:function(){0!==this.score&&this.score--,this._refreshScoreDisplay(this.score)},_refreshScoreDisplay:function(e){e=e||0,this.scoreDisplay.innerHTML=e},_gameCompleted:function(){if(e.isHighScore(this.score))this._newHighScore();else{var t=confirm("Well done!\nDo you wanna go again?");t&&this._restartGame()}},_newHighScore:function(){var t=prompt("Congrats, you have made it to the high score.\nPlease enter your name","Gandalf");e.addHighScore(t,this.score).save().then(this._populatScores).then(function(){var e=confirm("One More?");e&&this._restartGame()}.bind(this))}}}();t.exports=n},{"./grid.js":4,"./polyfills.js":5,"./pubSub.js":6,"./score.model.js":7}],4:[function(e,t){var s={size:4,colors:["DD232D","E0DC2E","46E62D","37E4B7","3079E0","5A1AE0","FB18D6","FB421B"]},r=e("./cell.js"),n=null,i=function(){return _getShuffeledColors=function(e){var t=[];e=e.concat(e.slice());var s=e.length;do{var r=Math.floor(Math.random()*s);t.push(e.splice(r,1)[0]),s=e.length}while(0!=s);return t},_generateGrid=function(){for(var e=_getShuffeledColors(s.colors),t=document.createElement("div"),n=0,i=e.length;i>n;n++){var o=r.create(e[n],n+1);t.appendChild(o)}return t},{currentCell:null,flippedCell:null,focusedCellID:1,gameBoard:document.getElementById("game-board"),init:function(){this._registerListeners(),this.gameBoard.innerHTML="",this.gameBoard.appendChild(_generateGrid()),this._setCellFocus()},_registerListeners:function(){$.subscribe("cellClicked",this,this._cellClickedCB),$(document).keydown(this._keyEvents.bind(this))},_gameRestart:function(){this.currentCell=this.flippedCell=null,this.gameBoard.innerHTML="",this.gameBoard.appendChild(_generateGrid())},_keyEvents:function(e){var t=e.keyCode;switch(t){case 37:this.focusedCellID=1===this.focusedCellID?16:this.focusedCellID-1;break;case 38:this.focusedCellID=this.focusedCellID<5?this.focusedCellID+12:this.focusedCellID-4;break;case 39:this.focusedCellID=16===this.focusedCellID?1:this.focusedCellID+1;break;case 40:this.focusedCellID=this.focusedCellID>12?this.focusedCellID-12:this.focusedCellID+4;break;case 13:$("#cell-"+this.focusedCellID).click()}this._setCellFocus()},_setCellFocus:function(e){return e=e||document,$(".cell").removeClass("active"),$("#cell-"+this.focusedCellID,e).addClass("active"),this},_cellClickedCB:function(e){var t=this;n&&t._cancelMoves(),t.currentCell=e,t.flippedCell?t.flippedCell.getAttribute("data-color")===e.getAttribute("data-color")?($.publish("scoreInc"),$.publish("pairFound"),t.flippedCell=null,t._setCellFocus()):n=setTimeout(function(){t._cancelMoves()},700):t.flippedCell=e},_cancelMoves:function(){this.currentCell.className=this.flippedCell.className="cell turned-over",$.publish("scoreDec"),this.flippedCell=this.currentCell=null,n&&window.clearTimeout(n),n=null,this._setCellFocus()}}}();t.exports=i},{"./cell.js":1}],5:[function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),s=this,r=function(){},n=function(){return s.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n})},{}],6:[function(){!function(e){var t={};e.subscribe=function(e,s,r){e in t||(t[e]=[]),"string"==typeof r&&(r=s[r]),t[e].push({subscriber:s,callback:r})},e.unsubscribe=function(s,r){s in t&&t[s].length&&(t[s]=e.map(t[s],function(e){return e.callback==r?null:e}))},e.publish=function(s,r){r=r?[r]:[],e.each(t[s],function(e,t){t.callback.apply(t.subscriber,r)})}}(jQuery)},{}],7:[function(e,t){var s=function(e){return{currentScore:null,highScores:[],fetch:function(){return e.getJSON(_GLOBALS.baseURL+"/scores").then(this._setHighScores.bind(this))},save:function(){var t=JSON.stringify(this.highScores);return e.ajax({method:"POST",url:_GLOBALS.baseURL+"/scores",data:"data="+t})},_setHighScores:function(e){return this.highScores=e,this},isHighScore:function(e){var t=this.highScores.length;return 5>t||this.highScores[t-1].points<=e},addHighScore:function(e,t){var s={name:e,points:t};return this.highScores.length>4&&this.highScores.pop(),this.highScores.push(s),this}}}($);t.exports=s},{}]},{},[2]);